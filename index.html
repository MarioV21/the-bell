<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>The Bell Sushi - Premium Japanese Cuisine</title>
  <style>
    /* ---------- Base ---------- */
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    html,body { height:100%; }
    body { background:#0a0a0a; color:#fff; overflow-x:hidden; }

    /* ---------- Section A - Landing ---------- */
    .section-a {
      height:100vh;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      background: linear-gradient(135deg,#1a1a1a 0%,#2d1b1e 100%);
      position:relative;
      overflow:hidden;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }
    .section-a::before{
      content:''; position:absolute; inset:0;
      background-image: url('https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
      background-size:cover; background-position:center; opacity:.18; z-index:0;
    }
    .logo-container{ z-index:1; margin-bottom:32px; animation:float 6s ease-in-out infinite; }
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-18px)}100%{transform:translateY(0)}}
    .logo{ width:180px; height:180px; border-radius:50%; background:#c41e3a; display:flex; align-items:center; justify-content:center; font-size:3.6rem; font-weight:700; color:#fff; box-shadow:0 0 30px rgba(196,30,58,.6); }
    .sushi-quote{ z-index:1; font-size:1.6rem; font-style:italic; max-width:860px; text-align:center; color:#f6f6f6; padding:0 12px; margin-bottom:24px; line-height:1.5; }
    .menu-link{ z-index:1; padding:14px 36px; background:linear-gradient(45deg,#c41e3a,#8b0000); color:#fff; text-decoration:none; border-radius:48px; font-weight:700; letter-spacing:1px; display:inline-flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(196,30,58,.35); min-height:44px; min-width:44px; }

    /* ---------- Section B - Carousel ---------- */
    .section-b{ padding:68px 20px; background: linear-gradient(135deg,#2d1b1e 0%,#1a1a1a 100%); }
    .menu-container{ max-width:1200px; margin:0 auto; text-align:center; }
    .menu-header h1{ color:#c41e3a; font-size:2.4rem; margin-bottom:8px; }
    .menu-header p{ color:#ccc; margin-bottom:20px; }

    .carousel-container{
      position:relative;
      width:100%;
      max-width:980px;
      height:420px;
      margin:0 auto;
      perspective:1000px;
      overflow:visible;
    }

    .carousel{
      width:100%;
      height:100%;
      position:relative;
      transform-style:preserve-3d;
      transition: transform 0.8s cubic-bezier(.25,.46,.45,.94);
      transform-origin:center center;
      will-change:transform;
    }

    .product-card{
      position:absolute;
      left:50%;
      top:50%;
      width:280px;
      height:380px;
      margin-left:-140px;
      margin-top:-190px;
      border-radius:14px;
      overflow:hidden;
      background:#fff;
      color:#222;
      box-shadow:0 18px 40px rgba(0,0,0,.35);
      transform-origin:center center;
      transition: transform 0.8s cubic-bezier(.25,.46,.45,.94), opacity 0.4s;
      backface-visibility:hidden;
      display:flex;
      flex-direction:column;
    }

    .product-image{ height:200px; width:100%; background-size:cover; background-position:center; position:relative; }
    .view-3d-btn{ position:absolute; right:12px; top:12px; background:rgba(196,30,58,.95); color:#fff; border:none; padding:6px 10px; border-radius:18px; font-weight:700; cursor:pointer; z-index:3; }
    .product-info{ padding:16px; flex:1; display:flex; flex-direction:column; justify-content:space-between; }
    .product-title{ font-size:1.2rem; font-weight:800; margin-bottom:6px; color:#333; }
    .product-description{ color:#666; font-size:.9rem; line-height:1.35; margin-bottom:12px; height:3.6em; overflow:hidden; }
    .product-price{ color:#c41e3a; font-size:1.3rem; font-weight:800; margin-bottom:12px; }
    .product-button{ width:100%; padding:11px; border-radius:999px; background:linear-gradient(45deg,#c41e3a,#8b0000); color:#fff; border:none; font-weight:800; cursor:pointer; box-shadow:0 8px 20px rgba(196,30,58,.2); }

    /* Controls & indicators */
    .carousel-controls{ display:flex; justify-content:center; gap:16px; margin-top:18px; }
    .carousel-btn{ width:54px; height:54px; border-radius:50%; background:rgba(255,255,255,.12); border:2px solid rgba(255,255,255,.18); color:#fff; font-size:1.2rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:transform .18s; }
    .carousel-btn:hover{ transform:scale(1.05); }
    .carousel-indicators{ display:flex; justify-content:center; gap:10px; margin-top:12px; }
    .indicator{ width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,.28); cursor:pointer; transition:transform .18s, background .18s; }
    .indicator.active{ background:#fff; transform:scale(1.3); }

    /* modal & notification */
    .modal-3d{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.95); z-index:2000; justify-content:center; align-items:center; flex-direction:column; }
    .modal-3d.active{ display:flex; }
    .modal-3d-content{ width:84%; max-width:720px; height:60%; max-height:560px; perspective:1400px; margin-bottom:18px; }
    .modal-3d-image{ width:100%; height:100%; object-fit:contain; transform-style:preserve-3d; transition:transform .4s; border-radius:10px; }
    .modal-3d-title{ color:#fff; font-size:1.6rem; margin-bottom:10px; text-align:center; }
    .modal-3d-close{ position:absolute; top:18px; right:18px; background:rgba(255,255,255,.08); border:none; color:#fff; width:44px; height:44px; border-radius:50%; font-size:1.4rem; cursor:pointer; }
    .modal-3d-controls{ display:flex; gap:12px; }

    .notification{ position:fixed; top:20px; right:20px; background:#2ecc71; color:#fff; padding:12px 18px; border-radius:8px; transform:translateX(400px); transition:transform .35s; z-index:2500; }
    .notification.show{ transform:translateX(0); }

    /* ---------- Responsive tweaks (phone compatibility) ---------- */
    img, video { max-width:100%; height:auto; }
    :root{ --safe-inset-top: env(safe-area-inset-top); --safe-inset-right: env(safe-area-inset-right); --safe-inset-bottom: env(safe-area-inset-bottom); --safe-inset-left: env(safe-area-inset-left); }
    .section-a,.section-b,.section-c{ padding-left: max(16px,var(--safe-inset-left)); padding-right: max(16px,var(--safe-inset-right)); }

    @media (max-width:760px){
      .carousel-container{ height:360px; perspective:800px; }
      .product-card{ width:240px; height:320px; margin-left:-120px; margin-top:-160px; }
      .product-image{ height:160px; }
      .logo{ width:140px; height:140px; font-size:2.6rem; }
      .sushi-quote{ font-size:1.15rem; padding:0 12px; }
    }

    @media (max-width:420px){
      .carousel-container{ height:320px; perspective:700px; padding:0 12px; }
      .product-card{ width:220px; height:300px; margin-left:-110px; margin-top:-150px; }
      .carousel-btn{ width:52px; height:52px; }
      .logo{ width:120px; height:120px; font-size:2.4rem; }
      .menu-link{ padding:10px 20px; font-size:1rem; }
    }

    @media (max-width:360px){
      .product-card{ width:200px; height:270px; margin-left:-100px; margin-top:-135px; }
      .product-image{ height:140px; }
      .sushi-quote{ font-size:1.0rem; }
    }

    /* ---------- Text menu styles (section C) ---------- */
    .section-c{ padding:60px 20px; background: linear-gradient(135deg,#1a1a1a 0%, #0a0a0a 100%); }
    .section-c-header{ text-align:center; margin-bottom:28px; }
    .section-c-header h2{ color:#c41e3a; font-size:2.6rem; display:inline-block; position:relative; }
    .section-c-header p{ color:#ccc; max-width:760px; margin:12px auto 0; }
    .text-menu{ max-width:980px; margin:0 auto; color:#ddd; line-height:1.6; }
    .menu-category{ margin-bottom:28px; }
    .category-title{ color:#c41e3a; font-size:1.6rem; margin-bottom:8px; text-transform:uppercase; }
    .menu-items-list{ list-style:none; }
    .menu-item{ border-bottom:1px solid rgba(255,255,255,.04); padding:10px 0; }
    .menu-item-header{ display:flex; justify-content:space-between; align-items:baseline; }
    .menu-item-name{ font-weight:700; color:#fff; }
    .menu-item-price{ color:#c41e3a; font-weight:800; }
    .menu-item-description{ color:#bbb; font-size:.95rem; margin-top:6px; }
  </style>
</head>
<body>

  <!-- SECTION A -->
  <section id="section-a" class="section-a">
    <div class="logo-container"><div class="logo">B</div></div>
    <p class="sushi-quote">"The art of sushi is not just about taste, but about harmony, balance, and respect for ingredients."</p>
    <a class="menu-link" href="#section-c">Explore Our Menu</a>
  </section>

  <!-- SECTION B - 3D CIRCULAR CAROUSEL -->
  <section id="section-b" class="section-b">
    <div class="menu-container">
      <div class="menu-header">
        <h1>Chef's Special Selection</h1>
        <p>Discover our premium sushi creations crafted with the finest ingredients</p>
      </div>

      <div class="carousel-container">
        <div class="carousel" id="carousel">
          <!-- 6 product cards (you can add/remove, JS handles any count) -->
          <div class="product-card" data-product="Premium Sushi Platter" data-image="https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
            <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1579584425555-c3ce17fd4351?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')">
              <button class="view-3d-btn" data-product="Premium Sushi Platter">See it in 3D</button>
            </div>
            <div class="product-info">
              <div>
                <div class="product-title">Premium Sushi Platter</div>
                <div class="product-description">A selection of our finest nigiri and sashimi, served with traditional accompaniments.</div>
              </div>
              <div>
                <div class="product-price">$45.99</div>
                <button class="product-button">Add to Order</button>
              </div>
            </div>
          </div>

          <div class="product-card" data-product="Dragon Roll" data-image="https://images.unsplash.com/photo-1617196034796-73dfa7b1fd56?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
            <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1617196034796-73dfa7b1fd56?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')">
              <button class="view-3d-btn" data-product="Dragon Roll">See it in 3D</button>
            </div>
            <div class="product-info">
              <div>
                <div class="product-title">Dragon Roll</div>
                <div class="product-description">Eel, cucumber, and avocado wrapped and topped with eel sauce.</div>
              </div>
              <div>
                <div class="product-price">$18.99</div>
                <button class="product-button">Add to Order</button>
              </div>
            </div>
          </div>

          <div class="product-card" data-product="Tuna Tataki" data-image="https://images.unsplash.com/photo-1544025162-d76694265947?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
            <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1544025162-d76694265947?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')">
              <button class="view-3d-btn" data-product="Tuna Tataki">See it in 3D</button>
            </div>
            <div class="product-info">
              <div>
                <div class="product-title">Tuna Tataki</div>
                <div class="product-description">Seared tuna loin with sesame seeds, served with ponzu and microgreens.</div>
              </div>
              <div>
                <div class="product-price">$22.99</div>
                <button class="product-button">Add to Order</button>
              </div>
            </div>
          </div>

          <div class="product-card" data-product="Rainbow Roll" data-image="https://images.unsplash.com/photo-1544025162-1234567890?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
            <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1544025162-1234567890?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')">
              <button class="view-3d-btn" data-product="Rainbow Roll">See it in 3D</button>
            </div>
            <div class="product-info">
              <div>
                <div class="product-title">Rainbow Roll</div>
                <div class="product-description">California roll topped with assorted sashimi — a vibrant rainbow of flavors.</div>
              </div>
              <div>
                <div class="product-price">$16.99</div>
                <button class="product-button">Add to Order</button>
              </div>
            </div>
          </div>

          <div class="product-card" data-product="Salmon Nigiri" data-image="https://images.unsplash.com/photo-1544025162-0987654321?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
            <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1544025162-0987654321?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')">
              <button class="view-3d-btn" data-product="Salmon Nigiri">See it in 3D</button>
            </div>
            <div class="product-info">
              <div>
                <div class="product-title">Salmon Nigiri</div>
                <div class="product-description">Fresh Atlantic salmon over seasoned sushi rice — pure and simple.</div>
              </div>
              <div>
                <div class="product-price">$8.99</div>
                <button class="product-button">Add to Order</button>
              </div>
            </div>
          </div>

          <div class="product-card" data-product="Tempura Uramaki" data-image="https://images.unsplash.com/photo-1544025162-5432167890?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
            <div class="product-image" style="background-image:url('https://images.unsplash.com/photo-1544025162-5432167890?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')">
              <button class="view-3d-btn" data-product="Tempura Uramaki">See it in 3D</button>
            </div>
            <div class="product-info">
              <div>
                <div class="product-title">Tempura Uramaki</div>
                <div class="product-description">Inside-out roll with shrimp tempura and avocado, rolled in crispy flakes.</div>
              </div>
              <div>
                <div class="product-price">$14.99</div>
                <button class="product-button">Add to Order</button>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Controls -->
      <div class="carousel-controls" style="margin-top:12px;">
        <button class="carousel-btn" id="prevBtn">❮</button>
        <button class="carousel-btn" id="nextBtn">❯</button>
      </div>

      <div class="carousel-indicators" id="indicators" style="margin-top:10px;">
        <!-- will be populated by JS based on number of cards -->
      </div>

    </div>
  </section>

  <!-- SECTION C - TEXT MENU (kept comprehensive) -->
  <section id="section-c" class="section-c">
    <div class="section-c-header">
      <h2>Our Exquisite Menu</h2>
      <p>Each dish is a masterpiece, crafted with precision and the finest ingredients</p>
    </div>

    <div class="text-menu">
      <!-- (Abbreviated but representative categories) -->
      <div class="menu-category">
        <h3 class="category-title">SALLATË</h3>
        <ul class="menu-items-list">
          <li class="menu-item"><div class="menu-item-header"><span class="menu-item-name">The Bell</span><span class="menu-item-price">650</span></div><p class="menu-item-description">Our signature salad with fresh ingredients and special dressing.</p></li>
          <li class="menu-item"><div class="menu-item-header"><span class="menu-item-name">Wakame</span><span class="menu-item-price">600</span></div><p class="menu-item-description">Fresh seaweed salad with sesame dressing.</p></li>
        </ul>
      </div>

      <div class="menu-category">
        <h3 class="category-title">NIGIRI</h3>
        <ul class="menu-items-list">
          <li class="menu-item"><div class="menu-item-header"><span class="menu-item-name">Salmon</span><span class="menu-item-price">120</span></div><p class="menu-item-description">Fresh salmon on seasoned rice.</p></li>
          <li class="menu-item"><div class="menu-item-header"><span class="menu-item-name">Ton</span><span class="menu-item-price">130</span></div><p class="menu-item-description">Fresh tuna on seasoned rice.</p></li>
        </ul>
      </div>

      <div class="menu-category">
        <h3 class="category-title">SASHIMI</h3>
        <ul class="menu-items-list">
          <li class="menu-item"><div class="menu-item-header"><span class="menu-item-name">Salmon</span><span class="menu-item-price">200</span></div><p class="menu-item-description">Fresh salmon sashimi.</p></li>
          <li class="menu-item"><div class="menu-item-header"><span class="menu-item-name">Ton</span><span class="menu-item-price">200</span></div><p class="menu-item-description">Fresh tuna sashimi.</p></li>
        </ul>
      </div>

      <!-- Add more categories / items as needed (kept concise here) -->
    </div>
  </section>

  <!-- 3D Modal -->
  <div class="modal-3d" id="modal-3d">
    <button class="modal-3d-close" id="modal-3d-close">×</button>
    <h2 class="modal-3d-title" id="modal-3d-title">Product</h2>
    <div class="modal-3d-content">
      <img id="modal-3d-image" class="modal-3d-image" src="" alt="3D view">
    </div>
    <div class="modal-3d-controls">
      <button class="modal-3d-btn" id="rotate-left">Rotate Left</button>
      <button class="modal-3d-btn" id="rotate-right">Rotate Right</button>
      <button class="modal-3d-btn" id="reset-view">Reset View</button>
    </div>
  </div>

  <div id="notification" class="notification" style="display:none;"><span id="notification-text"></span></div>

  <script>
    (function(){
      // Elements
      const carousel = document.getElementById('carousel');
      const cards = Array.from(carousel.querySelectorAll('.product-card'));
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const indicatorsContainer = document.getElementById('indicators');
      const modal3d = document.getElementById('modal-3d');
      const modal3dClose = document.getElementById('modal-3d-close');
      const modal3dTitle = document.getElementById('modal-3d-title');
      const modal3dImage = document.getElementById('modal-3d-image');
      const rotateLeftBtn = document.getElementById('rotate-left');
      const rotateRightBtn = document.getElementById('rotate-right');
      const resetViewBtn = document.getElementById('reset-view');
      const notification = document.getElementById('notification');
      const notificationText = document.getElementById('notification-text');

      let total = cards.length;
      if (total === 0) return;

      // Create indicators dynamically (keeps sync with number of cards)
      for (let i=0;i<total;i++){
        const dot = document.createElement('div');
        dot.className = 'indicator' + (i===0 ? ' active' : '');
        dot.dataset.index = i;
        indicatorsContainer.appendChild(dot);
      }
      const indicators = Array.from(indicatorsContainer.querySelectorAll('.indicator'));

      // 3D ring layout parameters
      let radius = Math.round(Math.min(window.innerWidth, 900) * 0.45); // radius relative to viewport (adjusts on resize)
      const angleStep = 360 / total;
      let currentIndex = 0;
      let currentRotation = 0; // degrees

      function layoutCards() {
        // recalc radius on resize for responsive look
        radius = Math.round(Math.min(window.innerWidth, 1000) * 0.45);
        cards.forEach((card, i) => {
          // place each card on a circle using rotateY + translateZ
          const deg = i * angleStep;
          // We start unrotated; transform is set so the ring lies around the Z axis
          card.style.transform = `rotateY(${deg}deg) translateZ(${radius}px)`;
        });
        // apply current rotation (center) to carousel
        carousel.style.transform = `translateZ(-${radius}px) rotateY(${currentRotation}deg)`;
      }

      // Ensure first render correct
      layoutCards();

      // Re-layout when window resizes to keep proportions
      window.addEventListener('resize', () => {
        layoutCards();
      });

      // Helper to update active indicator
      function updateIndicators() {
        indicators.forEach((d, idx) => {
          d.classList.toggle('active', idx === currentIndex);
        });
      }

      // Move to index (0..total-1)
      function moveToIndex(index, animate=true) {
        // normalize index
        index = ((index % total) + total) % total;
        currentIndex = index;
        // compute target rotation so card at 'index' faces front.
        // If cards are placed at deg = i*angleStep, then to bring card i to 0 deg (front),
        // rotate the ring by -i*angleStep degrees.
        const target = - index * angleStep;
        currentRotation = target;
        if (!animate) carousel.style.transition = 'none';
        else carousel.style.transition = 'transform 0.7s cubic-bezier(.25,.46,.45,.94)';
        // apply transform: translateZ(-radius) to bring ring center into view
        carousel.style.transform = `translateZ(-${radius}px) rotateY(${currentRotation}deg)`;

        // restore transition after short timeout if disabled
        if (!animate) {
          // allow repaint then restore transition
          requestAnimationFrame(()=> {
            requestAnimationFrame(()=> {
              carousel.style.transition = 'transform 0.7s cubic-bezier(.25,.46,.45,.94)';
            });
          });
        }

        updateIndicators();
      }

      // init
      moveToIndex(0, false);

      // Buttons
      nextBtn.addEventListener('click', () => {
        moveToIndex(currentIndex + 1);
      });
      prevBtn.addEventListener('click', () => {
        moveToIndex(currentIndex - 1);
      });

      // indicators click
      indicators.forEach(dot => {
        dot.addEventListener('click', (e) => {
          const idx = parseInt(e.currentTarget.dataset.index, 10);
          moveToIndex(idx);
        });
      });

      // swipe / touch support
      let touchStartX = 0, touchEndX = 0, isTouching = false;
      carousel.addEventListener('touchstart', (e) => {
        isTouching = true;
        touchStartX = e.changedTouches[0].clientX;
      }, {passive:true});
      carousel.addEventListener('touchmove',(e)=>{
        if(!isTouching) return;
        // optional: you can add drag-to-rotate behavior here
      }, {passive:true});
      carousel.addEventListener('touchend',(e)=>{
        isTouching = false;
        touchEndX = e.changedTouches[0].clientX;
        const diff = touchStartX - touchEndX;
        const threshold = 40;
        if (Math.abs(diff) > threshold) {
          if (diff > 0) moveToIndex(currentIndex + 1);
          else moveToIndex(currentIndex - 1);
        }
      }, {passive:true});

      // mouse drag for desktop
      let mouseDown = false, mouseX = 0;
      carousel.addEventListener('mousedown',(e)=>{
        mouseDown = true; mouseX = e.clientX;
        carousel.style.cursor = 'grabbing';
      });
      window.addEventListener('mousemove',(e)=>{
        if(!mouseDown) return;
        // we don't implement live drag rotation for simplicity; use mouse up to detect swipe
      });
      window.addEventListener('mouseup',(e)=>{
        if(!mouseDown) return;
        mouseDown = false; carousel.style.cursor='default';
        const diff = mouseX - e.clientX;
        const threshold = 30;
        if (Math.abs(diff) > threshold) {
          if (diff > 0) moveToIndex(currentIndex + 1);
          else moveToIndex(currentIndex - 1);
        }
      });

      // Add keyboard navigation
      document.addEventListener('keydown',(e)=>{
        if (e.key === 'ArrowLeft') moveToIndex(currentIndex - 1);
        if (e.key === 'ArrowRight') moveToIndex(currentIndex + 1);
      });

      // product-button add to order (notification)
      document.querySelectorAll('.product-button').forEach(btn => {
        btn.addEventListener('click',(e)=>{
          e.stopPropagation();
          const productCard = btn.closest('.product-card');
          const name = productCard ? (productCard.dataset.product || 'Item') : 'Item';
          notificationText.textContent = `${name} added to your order!`;
          notification.style.display = 'block';
          notification.classList.add('show');
          setTimeout(()=>{ notification.classList.remove('show'); }, 2300);
        });
      });

      // 3D modal open
      document.querySelectorAll('.view-3d-btn').forEach(b=>{
        b.addEventListener('click',(e)=>{
          e.stopPropagation();
          const pd = b.closest('.product-card');
          const productName = pd.dataset.product || 'Product';
          const src = pd.dataset.image || '';
          modal3dTitle.textContent = productName;
          modal3dImage.src = src;
          modal3d.classList.add('active');
          modal3dImage.style.transform = 'rotateY(0deg)';
          currentModalRotation = 0;
        });
      });

      // Modal controls
      modal3dClose.addEventListener('click', ()=> modal3d.classList.remove('active'));
      modal3d.addEventListener('click',(e)=> { if (e.target === modal3d) modal3d.classList.remove('active');});

      let currentModalRotation = 0;
      rotateLeftBtn.addEventListener('click', ()=> {
        currentModalRotation -= 45;
        modal3dImage.style.transform = `rotateY(${currentModalRotation}deg)`;
      });
      rotateRightBtn.addEventListener('click', ()=> {
        currentModalRotation += 45;
        modal3dImage.style.transform = `rotateY(${currentModalRotation}deg)`;
      });
      resetViewBtn.addEventListener('click', ()=> {
        currentModalRotation = 0;
        modal3dImage.style.transform = `rotateY(0deg)`;
      });

      // Make sure layout is correct on load
      window.addEventListener('load', ()=> { layoutCards(); moveToIndex(0,false); });
    })();

    // Smooth scroll for menu link
    document.addEventListener('DOMContentLoaded', () => {
      const menuLink = document.querySelector('.menu-link');
      if (menuLink) menuLink.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.getElementById('section-c');
        if (target) target.scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>
</body>
</html>
